# from SignalLib import *
# def func(d, w1, w2):
#     """
#     é«˜é¢‘å› å­ï¼ˆ9ï¼‰ï¼šé«˜é¢‘æ³¢åŠ¨ä¸­çš„æ—¶é—´åºåˆ—ä¿¡æ¯_é«˜é¢‘å› å­ç³»åˆ—æŠ¥å‘Š_é•¿æ±Ÿè¯åˆ¸
#     å¯¹å‰æ–‡ä¸­æ„å»ºçš„é«˜é¢‘æ³¢åŠ¨å› å­è€Œè¨€ï¼ŒåŒæ ·å¯ä»¥é‡‡ç”¨è¿™ç§å…ˆå·®åˆ†å†è®¡ç®—æ ‡
#     å‡†å·®çš„æ–¹æ³•ï¼Œä»¥æ­¤å°è¯•å°†æ•°æ®ä¸­çš„æ—¶é—´åºåˆ—ä¿¡æ¯çº³å…¥å› å­ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå·®åˆ†å¹¶ä¸
#     èƒ½èµ·åˆ°å»é‡çº²çš„ä½œç”¨ï¼Œå› æ­¤åœ¨è®¡ç®—å®Œæ—¥å†…æ ‡å‡†å·®åæˆ‘ä»¬ä»éœ€é‡‡å–æ ‡å‡†å·®/å‡å€¼(è¿™é‡Œçš„å‡
#     å€¼ä»ä¸ºå·®åˆ†å‰åºåˆ—çš„å‡å€¼)çš„æ–¹å¼å‰¥ç¦»æ•°æ®è‡ªèº«é‡çº²çš„å½±å“ã€‚
#     ä»¥æ¯ç¬”æˆäº¤é‡æ•°æ®ä¸ºä¾‹ï¼Œæœ¬æ–‡ä¾ç…§ä¸Šè¿°æ€è·¯æ„å»ºäº†æ¯ç¬”æˆäº¤é‡å·®åˆ†æ ‡å‡†å·®å› å­ï¼š
#     ğ‘‘ğ‘–ğ‘“ğ‘“ğ‘– = ğ‘£ğ‘œğ‘™ğ‘ğ‘– âˆ’ ğ‘£ğ‘œğ‘™ğ‘(ğ‘–âˆ’1)
#     ğ‘‘ğ‘–ğ‘“ğ‘“_ğ‘ ğ‘¡ğ‘‘ğ‘‘ğ‘ğ‘¦ =ğ‘ ğ‘¡ğ‘‘({ğ‘‘ğ‘–ğ‘“ğ‘“ğ‘–})/ğ‘šğ‘’ğ‘ğ‘›({ğ‘£ğ‘œğ‘™ğ‘ğ‘–})
#     ğ‘‘ğ‘–ğ‘“ğ‘“_ğ‘ ğ‘¡ğ‘‘ğ‘£ğ‘œğ‘™ğ‘ = ğ‘šğ‘’ğ‘ğ‘›({ğ‘‘ğ‘–ğ‘“ğ‘“_ğ‘ ğ‘¡ğ‘‘ğ‘‘ğ‘ğ‘¦})
#     å…¶ä¸­ğ‘£ğ‘œğ‘™ğ‘ğ‘–ä¸ºä¸ªè‚¡æ—¥å†…çš„æ¯ç¬”æˆäº¤é‡(æˆäº¤é‡/æˆäº¤ç¬”æ•°)

#     Parameters
#     ----------
#     d :
#     w1 : è®¡ç®— std çª—å£
#     w2 : å‡çº¿å¹³æ»‘çª—å£

#     Returns
#     -------

#     """
#     a, n = d['a'], d['n']
#     a_per_trans = a/n
#     std = np.nanstd(rolling(diff(a_per_trans), w1, keep_shape=True), axis=-1)
#     diff_abs_mean = np.nanmean(rolling(np.abs(diff(a_per_trans)), w1, keep_shape=True), axis=-1)
#     ma = np.nanmean(rolling(a_per_trans, w1, keep_shape=True), axis=-1)
#     diff_std_period = ffill(std / ma)
#     diff_abs_mean_period = ffill(diff_abs_mean /ma)
#     res1 = ta.MA(diff_std_period, w2)
#     res2 = ta.MA(diff_abs_mean_period, w2)
#     return np.log1p(res1), np.log1p(res2)


# if __name__ == '__main__':
#     for ns in [[10, 10], [10, 20], [10, 50], [10, 80],[10, 100], [20, 10], [20, 20], [20, 50], [20, 80],[20, 100], [50, 10], [50, 20], [50, 50], [50, 80],[50, 100]]:
#         res = run_test(func, *ns, w=5)
